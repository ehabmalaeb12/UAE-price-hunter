<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Top Deals - UAE Price Hunter</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .compact-deals-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }
        
        .compact-deal-card {
            background: rgba(26, 22, 18, 0.7);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-md);
            padding: 1.2rem;
            transition: all 0.3s ease;
        }
        
        .compact-deal-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-md);
            border-color: var(--primary);
        }
        
        .compact-deal-image {
            width: 100%;
            height: 180px;
            object-fit: cover;
            border-radius: var(--radius-sm);
            margin-bottom: 1rem;
        }
        
        .deal-store-tag {
            display: inline-block;
            padding: 0.3rem 0.8rem;
            background: rgba(197, 160, 89, 0.1);
            color: var(--primary);
            border-radius: var(--radius-sm);
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: 0.8rem;
        }
        
        .compact-deal-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--light);
            margin-bottom: 0.5rem;
            line-height: 1.3;
        }
        
        .compact-deal-price {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
            margin: 0.5rem 0;
        }
        
        .compact-original-price {
            text-decoration: line-through;
            color: #94a3b8;
            font-size: 0.9rem;
            margin-right: 0.5rem;
        }
        
        .deal-discount-badge {
            background: var(--gradient-accent);
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: var(--radius-sm);
            font-size: 0.8rem;
            font-weight: 700;
        }
        
        .direct-buy-btn {
            width: 100%;
            margin-top: 1rem;
            background: var(--gradient-primary);
            color: white;
            border: none;
            border-radius: var(--radius-md);
            padding: 0.8rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            text-decoration: none;
            text-align: center;
        }
        
        .direct-buy-btn:hover {
            background: linear-gradient(135deg, #8E5A31, #C5A059);
            transform: translateY(-2px);
        }
        
        .deal-timer {
            background: rgba(212, 160, 23, 0.1);
            padding: 0.5rem;
            border-radius: var(--radius-sm);
            margin: 0.8rem 0;
            font-size: 0.8rem;
            color: var(--warning);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
    </style>
</head>
<body>
    <!-- Floating Language Button -->
    <button id="languageToggle" class="floating-btn" onclick="toggleLanguage()">
        <i class="fas fa-language"></i>
        <span>عربي</span>
    </button>

    <!-- Header -->
    <header class="glass-header">
        <div class="header-container">
            <div class="logo-section">
                <div class="logo">
                    <i class="fas fa-search-dollar"></i>
                    <h1>UAE PRICE HUNTER</h1>
                </div>
                <p class="tagline">Discover Amazing Deals</p>
            </div>
            
            <nav class="main-nav">
                <a href="index.html" class="nav-link">
                    <i class="fas fa-balance-scale"></i>
                    <span>Compare</span>
                </a>
                <a href="deals.html" class="nav-link active">
                    <i class="fas fa-fire"></i>
                    <span>Deals</span>
                </a>
                <a href="basket.html" class="nav-link">
                    <i class="fas fa-shopping-basket"></i>
                    <span>Basket</span>
                    <span id="basketCount" class="nav-badge">0</span>
                </a>
                <a href="profile.html" class="nav-link">
                    <i class="fas fa-user"></i>
                    <span>Profile</span>
                </a>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container" style="padding: 1rem;">
        <!-- Hero Section -->
        <section style="text-align: center; padding: 2rem 0;">
            <h1 style="font-size: 2.2rem; margin-bottom: 1rem; color: var(--light);">
                <i class="fas fa-fire" style="color: var(--accent);"></i>
                <span style="background: var(--gradient-accent); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                    Hot Deals
                </span>
            </h1>
            <p style="color: #E3C58E; margin-bottom: 2rem;">Direct links to store products with biggest discounts</p>
            
            <!-- Filter Buttons -->
            <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; margin-bottom: 2rem;">
                <button class="btn btn-outline" onclick="filterDeals('all')">All Deals</button>
                <button class="btn btn-outline" onclick="filterDeals('electronics')">
                    <i class="fas fa-mobile"></i> Electronics
                </button>
                <button class="btn btn-outline" onclick="filterDeals('fashion')">
                    <i class="fas fa-tshirt"></i> Fashion
                </button>
                <button class="btn btn-outline" onclick="filterDeals('home')">
                    <i class="fas fa-home"></i> Home
                </button>
            </div>
        </section>

        <!-- Deals Grid -->
        <section id="dealsContainer" class="compact-deals-grid">
            <!-- Deals will load here -->
            <div class="empty-state">
                <i class="fas fa-percentage" style="font-size: 3rem; color: var(--primary); opacity: 0.5;"></i>
                <h3>Loading Hot Deals...</h3>
                <p>Fetching best discounts from UAE stores</p>
            </div>
        </section>

        <!-- Info Section -->
        <section style="background: rgba(26, 22, 18, 0.7); padding: 2rem; border-radius: var(--radius-md); margin-top: 3rem;">
            <h3 style="text-align: center; margin-bottom: 1rem; color: var(--light);">
                <i class="fas fa-info-circle"></i> How Our Deals Work
            </h3>
            <p style="text-align: center; color: #E3C58E;">
                All "Buy Now" buttons take you directly to the store product page. 
                We earn a small commission when you purchase, which helps us provide this free service.
            </p>
        </section>
    </main>

    <!-- Footer -->
    <footer class="glass-footer" style="margin-top: 3rem;">
        <div class="footer-content">
            <div class="footer-section">
                <div class="footer-logo">
                    <i class="fas fa-search-dollar"></i>
                    <h3>UAE Price Hunter</h3>
                </div>
                <p>Your destination for the best deals in UAE</p>
            </div>
            <div class="footer-section">
                <h4>Quick Links</h4>
                <a href="index.html"><i class="fas fa-balance-scale"></i> Compare Prices</a>
                <a href="deals.html"><i class="fas fa-fire"></i> Top Deals</a>
                <a href="basket.html"><i class="fas fa-shopping-basket"></i> My Basket</a>
            </div>
        </div>
        <div class="footer-bottom">
            <p>© 2024 UAE Price Hunter. All deals are limited time offers.</p>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    
    <script>
        // Direct deals data - NO REDIRECT, goes straight to store
        const UAE_DEALS = [
            {
                id: 'deal1',
                title: 'iPhone 15 Pro Max 256GB',
                store: 'Amazon UAE',
                price: 4299,
                originalPrice: 4799,
                discount: 11,
                image: 'https://store.storeimages.cdn-apple.com/4982/as-images.apple.com/is/iphone-15-pro-finish-select-202309-6-7inch?wid=5120&hei=2880&fmt=webp&qlt=70',
                link: 'https://amazon.ae/dp/B0CHX6W8H9?tag=uaehunter-21',
                category: 'electronics',
                timeLeft: '2 days',
                shipping: 'FREE Delivery Tomorrow'
            },
            {
                id: 'deal2',
                title: 'Samsung Galaxy S24 Ultra',
                store: 'Noon UAE',
                price: 3899,
                originalPrice: 4599,
                discount: 15,
                image: 'https://images.samsung.com/is/image/samsung/p6pim/ae/2401/gallery/ae-galaxy-s24-s928-sm-s928bztgmea-539157404',
                link: 'https://noon.com/uae-en/samsung-galaxy-s24-ultra/p?utm_source=uaehunter',
                category: 'electronics',
                timeLeft: '1 day',
                shipping: 'Express 2-4 Hours'
            },
            {
                id: 'deal3',
                title: 'Arabic Oud Perfume Collection',
                store: 'Carrefour UAE',
                price: 199,
                originalPrice: 399,
                discount: 50,
                image: 'https://www.yrparfums.com/cdn/shop/files/YSL-YEux_Intense_Gold_100ml_1_1400x.jpg?v=1693225217',
                link: 'https://carrefouruae.com/arabic-perfume?source=uaehunter',
                category: 'beauty',
                timeLeft: '3 days',
                shipping: 'Same Day Delivery'
            },
            {
                id: 'deal4',
                title: 'Samsung 65" QLED 4K TV',
                store: 'Sharaf DG',
                price: 2999,
                originalPrice: 3999,
                discount: 25,
                image: 'https://m.media-amazon.com/images/I/81QpkIctqPL._AC_SL1500_.jpg',
                link: 'https://sharafdg.com/samsung-tv-65?aff=uaehunter',
                category: 'electronics',
                timeLeft: '5 days',
                shipping: 'Free Installation'
            },
            {
                id: 'deal5',
                title: 'Gold 22K Necklace Set',
                store: 'Amazon UAE',
                price: 2499,
                originalPrice: 3499,
                discount: 29,
                image: 'https://images.unsplash.com/photo-1535632066927-ab7c9ab60908?w=800&fit=crop',
                link: 'https://amazon.ae/gold-necklace-22k?tag=uaehunter-21',
                category: 'fashion',
                timeLeft: '7 days',
                shipping: 'Insured Delivery'
            },
            {
                id: 'deal6',
                title: 'Dyson Airwrap Complete',
                store: 'Noon UAE',
                price: 1899,
                originalPrice: 2499,
                discount: 24,
                image: 'https://m.media-amazon.com/images/I/71UoRZk7FaL._AC_SL1500_.jpg',
                link: 'https://noon.com/uae-en/dyson-airwrap/p?utm_source=uaehunter',
                category: 'beauty',
                timeLeft: '4 days',
                shipping: 'Express Delivery'
            }
        ];

        // Load deals on page load
        document.addEventListener('DOMContentLoaded', function() {
            loadDeals();
            updateBasketCount();
        });

        function loadDeals() {
            const container = document.getElementById('dealsContainer');
            container.innerHTML = '';
            
            UAE_DEALS.forEach(deal => {
                const dealCard = document.createElement('div');
                dealCard.className = 'compact-deal-card';
                
                dealCard.innerHTML = `
                    <div class="deal-store-tag">${deal.store}</div>
                    <img src="${deal.image}" alt="${deal.title}" class="compact-deal-image"
                         onerror="this.src='https://images.unsplash.com/photo-1607082348824-0a96f2a4b9da?w=400&h=300&fit=crop'">
                    
                    <h3 class="compact-deal-title">${deal.title}</h3>
                    
                    <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                        <span class="compact-original-price">${deal.originalPrice} AED</span>
                        <span class="compact-deal-price">${deal.price} AED</span>
                        <span class="deal-discount-badge">${deal.discount}% OFF</span>
                    </div>
                    
                    <div class="deal-timer">
                        <i class="fas fa-clock"></i>
                        <span>Ends in ${deal.timeLeft}</span>
                    </div>
                    
                    <p style="font-size: 0.9rem; color: #E3C58E; margin-bottom: 0.5rem;">
                        <i class="fas fa-shipping-fast"></i> ${deal.shipping}
                    </p>
                    
                    <!-- DIRECT LINK TO STORE - NO REDIRECT -->
                    <a href="${deal.link}" 
                       target="_blank" 
                       class="direct-buy-btn"
                       onclick="trackDealClick('${deal.id}')">
                        <i class="fas fa-external-link-alt"></i> BUY NOW AT ${deal.store}
                    </a>
                `;
                
                container.appendChild(dealCard);
            });
        }

        function filterDeals(category) {
            const container = document.getElementById('dealsContainer');
            container.innerHTML = '<div class="loading-state"><div class="spinner"></div><p>Filtering deals...</p></div>';
            
            setTimeout(() => {
                if (category === 'all') {
                    loadDeals();
                } else {
                    const filtered = UAE_DEALS.filter(deal => deal.category === category);
                    if (filtered.length === 0) {
                        container.innerHTML = `
                            <div class="empty-state">
                                <i class="fas fa-search"></i>
                                <h3>No ${category} deals found</h3>
                                <p>Try another category</p>
                            </div>
                        `;
                        return;
                    }
                    
                    container.innerHTML = '';
                    filtered.forEach(deal => {
                        const dealCard = document.createElement('div');
                        dealCard.className = 'compact-deal-card';
                        // Same card HTML as above
                        dealCard.innerHTML = `
                            <div class="deal-store-tag">${deal.store}</div>
                            <img src="${deal.image}" alt="${deal.title}" class="compact-deal-image"
                                 onerror="this.src='https://images.unsplash.com/photo-1607082348824-0a96f2a4b9da?w=400&h=300&fit=crop'">
                            
                            <h3 class="compact-deal-title">${deal.title}</h3>
                            
                            <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                                <span class="compact-original-price">${deal.originalPrice} AED</span>
                                <span class="compact-deal-price">${deal.price} AED</span>
                                <span class="deal-discount-badge">${deal.discount}% OFF</span>
                            </div>
                            
                            <div class="deal-timer">
                                <i class="fas fa-clock"></i>
                                <span>Ends in ${deal.timeLeft}</span>
                            </div>
                            
                            <p style="font-size: 0.9rem; color: #E3C58E; margin-bottom: 0.5rem;">
                                <i class="fas fa-shipping-fast"></i> ${deal.shipping}
                            </p>
                            
                            <a href="${deal.link}" 
                               target="_blank" 
                               class="direct-buy-btn"
                               onclick="trackDealClick('${deal.id}')">
                                <i class="fas fa-external-link-alt"></i> BUY NOW AT ${deal.store}
                            </a>
                        `;
                        container.appendChild(dealCard);
                    });
                }
            }, 500);
        }

        function trackDealClick(dealId) {
            console.log(`Deal clicked: ${dealId}`);
            // Track in localStorage
            const dealClicks = JSON.parse(localStorage.getItem('deal_clicks') || '[]');
            dealClicks.push({ dealId, timestamp: new Date().toISOString() });
            localStorage.setItem('deal_clicks', JSON.stringify(dealClicks));
            
            // Award points if user is logged in
            if (localStorage.getItem('current_user')) {
                const currentPoints = parseInt(localStorage.getItem('user_points') || '0');
                localStorage.setItem('user_points', (currentPoints + 10).toString());
            }
        }

        function updateBasketCount() {
            const basket = JSON.parse(localStorage.getItem('uae_price_hunter_basket') || '[]');
            const count = basket.reduce((total, item) => total + (item.quantity || 1), 0);
            document.getElementById('basketCount').textContent = count;
        }

        function toggleLanguage() {
            const currentLang = document.documentElement.lang;
            const newLang = currentLang === 'en' ? 'ar' : 'en';
            document.documentElement.lang = newLang;
            
            // Update button text
            const btn = document.getElementById('languageToggle');
            btn.querySelector('span').textContent = newLang === 'en' ? 'عربي' : 'English';
            
            // Show notification
            alert(`Language switched to ${newLang === 'en' ? 'English' : 'Arabic'}`);
        }
    </script>
</body>
</html>
