<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Profile - UAE Price Hunter</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Floating Language Button -->
    <button id="languageToggle" class="floating-btn" onclick="toggleLanguage()">
        <i class="fas fa-language"></i>
        <span>عربي</span>
    </button>

    <!-- Header -->
    <header class="glass-header">
        <div class="header-container">
            <div class="logo-section">
                <div class="logo">
                    <i class="fas fa-search-dollar"></i>
                    <h1>UAE PRICE HUNTER</h1>
                </div>
                <p class="tagline">Your Personal Shopping Hub</p>
            </div>
            
            <nav class="main-nav">
                <a href="index.html" class="nav-link">
                    <i class="fas fa-balance-scale"></i>
                    <span>Compare Prices</span>
                </a>
                <a href="deals.html" class="nav-link">
                    <i class="fas fa-fire"></i>
                    <span>Top Deals</span>
                </a>
                <a href="basket.html" class="nav-link">
                    <i class="fas fa-shopping-basket"></i>
                    <span>Basket</span>
                    <span id="basketCount" class="nav-badge">0</span>
                </a>
                <a href="profile.html" class="nav-link active">
                    <i class="fas fa-user"></i>
                    <span>Profile</span>
                </a>
                <a href="rewards.html" class="nav-link">
                    <i class="fas fa-gift"></i>
                    <span>Rewards</span>
                </a>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container">
        <!-- Profile Header -->
        <section class="profile-header">
            <div class="profile-card glass-card">
                <div class="profile-info">
                    <div class="avatar">
                        <i class="fas fa-user-circle"></i>
                    </div>
                    <div class="profile-details">
                        <h1 id="userName">Guest User</h1>
                        <p id="userEmail">Not logged in</p>
                        <div class="profile-meta">
                            <span><i class="fas fa-calendar"></i> Joined: <span id="joinDate">--</span></span>
                            <span><i class="fas fa-map-marker-alt"></i> <span id="userLocation">UAE</span></span>
                        </div>
                    </div>
                </div>
                
                <div class="profile-stats">
                    <div class="stat">
                        <div class="stat-value" id="totalSearches">0</div>
                        <div class="stat-label">Searches</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value" id="moneySaved">0</div>
                        <div class="stat-label">AED Saved</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value" id="pointsBalance">0</div>
                        <div class="stat-label">Points</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Authentication Section -->
        <section class="auth-section glass-card">
            <div class="auth-header">
                <h2><i class="fas fa-user-lock"></i> Account Management</h2>
                <p>Create account or login to save your data</p>
            </div>
            
            <div id="authForms">
                <!-- Login Form -->
                <div class="auth-form" id="loginForm">
                    <h3>Login to Your Account</h3>
                    <div class="form-group">
                        <input type="email" id="loginEmail" placeholder="Email address" required>
                    </div>
                    <div class="form-group">
                        <input type="password" id="loginPassword" placeholder="Password" required>
                    </div>
                    <button class="btn-primary" onclick="loginUser()">
                        <i class="fas fa-sign-in-alt"></i> Login
                    </button>
                    <p class="auth-switch">
                        Don't have account? 
                        <a href="#" onclick="showSignupForm()">Create one</a>
                    </p>
                </div>
                
                <!-- Signup Form (Hidden by default) -->
                <div class="auth-form" id="signupForm" style="display: none;">
                    <h3>Create New Account</h3>
                    <div class="form-group">
                        <input type="text" id="signupName" placeholder="Full name" required>
                    </div>
                    <div class="form-group">
                        <input type="email" id="signupEmail" placeholder="Email address" required>
                    </div>
                    <div class="form-group">
                        <input type="password" id="signupPassword" placeholder="Password (min 6 characters)" required>
                    </div>
                    <div class="form-group">
                        <input type="password" id="signupConfirm" placeholder="Confirm password" required>
                    </div>
                    <button class="btn-primary" onclick="signupUser()">
                        <i class="fas fa-user-plus"></i> Create Account
                    </button>
                    <p class="auth-switch">
                        Already have account? 
                        <a href="#" onclick="showLoginForm()">Login here</a>
                    </p>
                </div>
            </div>
            
            <div class="auth-divider">
                <span>OR</span>
            </div>
            
            <button class="btn-secondary" onclick="loginWithGoogle()">
                <i class="fab fa-google"></i> Continue with Google
            </button>
        </section>

        <!-- Profile Settings -->
        <section class="settings-section">
            <h2><i class="fas fa-cog"></i> Profile Settings</h2>
            
            <div class="settings-grid">
                <div class="setting-card glass-card">
                    <div class="setting-icon">
                        <i class="fas fa-user-edit"></i>
                    </div>
                    <div class="setting-content">
                        <h3>Personal Information</h3>
                        <p>Update your name, email, and contact details</p>
                    </div>
                    <button class="btn-outline">
                        <i class="fas fa-edit"></i> Edit
                    </button>
                </div>
                
                <div class="setting-card glass-card">
                    <div class="setting-icon">
                        <i class="fas fa-bell"></i>
                    </div>
                    <div class="setting-content">
                        <h3>Notifications</h3>
                        <p>Manage price alerts and deal notifications</p>
                    </div>
                    <button class="btn-outline">
                        <i class="fas fa-sliders-h"></i> Configure
                    </button>
                </div>
                
                <div class="setting-card glass-card">
                    <div class="setting-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <div class="setting-content">
                        <h3>Privacy & Security</h3>
                        <p>Control your data and security settings</p>
                    </div>
                    <button class="btn-outline">
                        <i class="fas fa-lock"></i> Secure
                    </button>
                </div>
                
                <div class="setting-card glass-card">
                    <div class="setting-icon">
                        <i class="fas fa-mobile-alt"></i>
                    </div>
                    <div class="setting-content">
                        <h3>Connected Devices</h3>
                        <p>Manage devices where you're logged in</p>
                    </div>
                    <button class="btn-outline">
                        <i class="fas fa-desktop"></i> Manage
                    </button>
                </div>
            </div>
        </section>

        <!-- Recent Activity -->
        <section class="activity-section">
            <div class="section-header">
                <h2><i class="fas fa-history"></i> Recent Activity</h2>
                <button class="btn-outline" onclick="clearActivity()">
                    <i class="fas fa-trash"></i> Clear
                </button>
            </div>
            
            <div class="activity-list" id="activityList">
                <!-- Activity items will load here -->
                <div class="empty-activity">
                    <i class="fas fa-search"></i>
                    <p>No recent activity. Start comparing prices!</p>
                </div>
            </div>
        </section>

        <!-- Account Actions -->
        <section class="actions-section glass-card">
            <h3><i class="fas fa-exclamation-triangle"></i> Account Actions</h3>
            <div class="action-buttons">
                <button class="btn-secondary" onclick="logoutUser()">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
                <button class="btn-outline" onclick="exportData()">
                    <i class="fas fa-download"></i> Export Data
                </button>
                <button class="btn-danger" onclick="deleteAccount()">
                    <i class="fas fa-trash"></i> Delete Account
                </button>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="glass-footer">
        <div class="footer-content">
            <div class="footer-section">
                <h4>Your Profile</h4>
                <p>Your data is protected and never shared</p>
                <p>All information stored securely in Firebase</p>
            </div>
            <div class="footer-section">
                <h4>Need Help?</h4>
                <a href="contact.html"><i class="fas fa-question-circle"></i> Support</a>
                <a href="faq.html"><i class="fas fa-life-ring"></i> FAQ</a>
                <a href="privacy.html"><i class="fas fa-shield-alt"></i> Privacy</a>
                <a href="terms.html"><i class="fas fa-file-contract"></i> Terms</a>
            </div>
        </div>
        <div class="footer-bottom">
            <p>© 2024 UAE Price Hunter. Your privacy is our priority.</p>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    
    <script src="firebase-config.js"></script>
    <script src="language.js"></script>
    <script src="auth.js"></script>
    <script src="profile-script.js"></script>

    <script>
        // Initialize profile page
        document.addEventListener('DOMContentLoaded', function() {
            initializeProfilePage();
            loadLanguagePreference();
        });

        // Toggle between login and signup forms
        function showSignupForm() {
            document.getElementById('loginForm').style.display = 'none';
            document.getElementById('signupForm').style.display = 'block';
        }

        function showLoginForm() {
            document.getElementById('signupForm').style.display = 'none';
            document.getElementById('loginForm').style.display = 'block';
        }

        // Toggle language
        function toggleLanguage() {
            const currentLang = document.documentElement.lang;
            const newLang = currentLang === 'en' ? 'ar' : 'en';
            setLanguage(newLang);
        }
    </script>
</body>
</html>
